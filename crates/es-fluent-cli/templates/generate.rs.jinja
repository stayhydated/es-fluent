// Auto-generated by es-fluent CLI
extern crate {{ crate_ident }};
use es_fluent::{EsFluentGenerator, FluentParseMode};

fn main() {
    // Read config from parent crate's i18n.toml
    let i18n_toml_path = std::path::Path::new("{{ i18n_toml_path }}");
    let config = es_fluent::es_fluent_toml::I18nConfig::read_from_path(i18n_toml_path)
        .expect("Failed to read i18n.toml");

    let i18n_dir = i18n_toml_path.parent().expect("Failed to get i18n directory");
    let assets_dir = i18n_dir.join(&config.assets_dir);
    let output_path = assets_dir.join(&config.fallback_language);

    EsFluentGenerator::builder()
        .output_path(output_path)
        .assets_dir(assets_dir)
        .crate_name("{{ crate_name }}")
        .build()
        .run_cli()
        .expect("Failed to run generator");
}
